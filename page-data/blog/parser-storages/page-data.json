{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/parser-storages/","result":{"data":{"markdownRemark":{"html":"<h3>기존 localStorage의 문제점 및 불편한 점</h3>\n<p>프론트 개발을 하다보면 클라이언트의 데이터 값을 저장하기 위해서 브라우저 저장소인 localStorage를 사용합니다.</p>\n<p>localStorage의 특징중 하나는 항상 문자 형태로 값을 저장해야 한다는 점과 값을 가져올 때마다 항상 문자 형태로 리턴이 된다는 점입니다.</p>\n<p>이러한 점 때문에 Object(객체,배열) 타입의 경우 JSON.stringify 매서드를 사용하여 타입을 변환해준 후 값을 저장해야 하는 불편한 점이 생깁니다. 또한 number, boolean 형태로 값을 저장할 경우 값을 가져올 때마다 문자 타입의 형태로 리턴되어 한번더 타입을 체크 해야하는 불편한 점이 생기기 마련이고, 이는 결국 개발자의 실수로 이어져 에러가 발생될 확률이 높아집니다.</p>\n<p>이러한 문제점들을 해결하고자 parser-storages 라는 라이브러리를 개발하게 되었습니다.</p>\n<h3>기존 localStorage와 parser-storages의 차이점</h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 45.39877300613497%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABJ0AAASdAHeZh94AAABrUlEQVR42mWS63KbMBCFeZUmgEQakwCSEAhJSGDX8aV12k76/k9yuuA240x+fLO7R+zRzqKE1y2k6NHUGvUwoo17KELvjhS/QYgOlaRz26ObLNpgIL1BP1vSDJZ+Vql3koIErh2KsF9JxwmZHcGMR9YvbJEPgfBgdsJdt8W9npDqiIfOfzBbDZcb3MsZh19/ML+eEY8XmHPEfAqYjwfElzdMlx+wvx3CyWOcR2jjUKoBterAnyXYDUnRaDBlaJKAdLnRzEjf83Cdjur7PiInregdRYdUGtLC2pfRd5m2yElLchpTbw/w558wp++Ir29wF8r3O4TDDiJMqN1Ee5sg7A4lmWa0U067ZRSZuKVD0g4D4hxgXIB2HaZ5hlAaZVWjlgpPskJRcjxXX8F5gbuMrXzJ8mueX/lfJ03XYY5kplv0vYX1W8o1rLUYBoMwBng/0pkhjfYYlrwnfYQxPWnD2jt6jxgCksdKrAZN06CqGwiaqqXa0weLqXNuRSlJT0hASknPTF7jP5bejgZTiv5y/rDBU1miqhpsHiuUmxq8KJDlOfIbOOcfYIx9qhf+AtxJJbRmeb5BAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"local storage example\" title=\"\" src=\"/static/670a42f893116347e2faa7e64793e4da/a6d36/local-storage-example.png\" srcset=\"/static/670a42f893116347e2faa7e64793e4da/222b7/local-storage-example.png 163w,\n/static/670a42f893116347e2faa7e64793e4da/ff46a/local-storage-example.png 325w,\n/static/670a42f893116347e2faa7e64793e4da/a6d36/local-storage-example.png 650w,\n/static/670a42f893116347e2faa7e64793e4da/e4374/local-storage-example.png 927w\" sizes=\"(max-width: 650px) 100vw, 650px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<br/>\n<p>위 코드에서 처럼 따로 JSON 객체를 사용하지 않아도 라이브러리가 자동으로 파싱 해주어 코드가 좀 더 간결해졌습니다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 620px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 52.760736196319016%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABJ0AAASdAHeZh94AAACB0lEQVR42nWR23aaUBCGeZIeoogoImdBkKMRUGITm3NWktWLXvT9H+DrYGNXV1Z68a09M8z8+9+DMvGW+FlFWNUE+fp4zpcJVh7jCHYUE8lphhGGn+OGJWPbZ2QHaB+gmFHO/uGJw/MPuttHnn7+It3XrG4Kyrs1+XnO9zuJ2xX2ckNR3RJFxf8FdTfCSXKhwI5zwrLBXMZMowVmHGJ4Ac5yIU5DNCvA9EssP0Od+6jWB4LGIibZbFnVe+w0wysjkqqVWkdaX5C1e5J6i71OCNoUr4qJC5mRPJR16E74TjCIaa5v2d+/Em3OyQ8Z9f5Ad//E7uaBy8cXDq/PJNcF6U1F+q2g2WXspK/IV7gy/+/zlWCxIJCfMLMd/CgSAparFN2YMdA0VH2CNp1yNlb5OhpKbcSZOmSoqQxUqQ2GfDob8Fn4MlRRiiIlThJ835dlh4QiHicrLGvO1JhimiaGYWDNLekJpGbgOC62GDDNOUEQECwCPM9lJiaUpmkoioI8L0hE+Hx7IJMdVus1m82G7qKjbRt2uy1XV5fUdU3XddTyrZ/r47Ztj71ZlqGEYShuLLnVObqJouXRQSirKMuSRgTKqqSqKspC8jcDnucd6edc1z3Sv1Lpg9lsxng8ZjLR0WRvuq4f6Wt9fjq1scZoNHrrnXyI0rvrBU+DJ6E/8fiv+HtOPe/5DVW0aTABgz3/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"local storage example2\" title=\"\" src=\"/static/dd7b87338df07b22302977c2e8b2af26/2a195/local-storage-example2.png\" srcset=\"/static/dd7b87338df07b22302977c2e8b2af26/222b7/local-storage-example2.png 163w,\n/static/dd7b87338df07b22302977c2e8b2af26/ff46a/local-storage-example2.png 325w,\n/static/dd7b87338df07b22302977c2e8b2af26/2a195/local-storage-example2.png 620w\" sizes=\"(max-width: 620px) 100vw, 620px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<br/>\n<p>위 코드를 보시면 개발자는 분명히 숫자 123과 불리언 값 true를 저장하였지만 값을 가져와보니 문자 타입으로 변환되어 리턴되는 것을 볼 수 있습니다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 48.46625766871166%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAABl0lEQVR42q2Q7VLbMBBF/SiUhJAEGCdWLMmSLEuWv0gMAfo9bafv/xS3a6UdMtOf8OPMXu+sj3edZKxAnWtsmITp9pB1D03V9g+oDk/YyRJmp7DJC5hGox4Mqs6g8IpyiXBfQjqNFb1/veVIttpBtSeRHUaSHiBDi60poL3BrtRIRYM0N7ja5FhsOBYpp3xikiz+1ijMXQO3f4zb1Q/PCOMz/OMRzBawtJHyBVIeUKgB11GSU53Er/WcJFU2npj7ABE8VBhow5427qCaAQVl5isI5+g0i6wocSv0Cf4/CbM1jt9+wo4HtJ9ajC9f0T19xvjlO/EDL79+w39s4//aHys4a7FmAquMYGdkPNZEa4k0Y0i3GXIhsKF8cTnDh9n8jBku53PiCrP5a/+C+hPns8nQd7D01dIY+HCPytWwpYHzDq6q0Pc9PJ3bhBDnmqaJvZJmpl7bBBijESgrVSBRSoMxFuFSgwuJikRd16GuayLEXJGUcw4pBYQ4IaWM/HueSO5uM6zXN1itVlgul28muVnfvZtsEv4BU9dF/fKLX3cAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"local storage example3\" title=\"\" src=\"/static/fa41fd6b886f95694d29e5df3d250cbd/a6d36/local-storage-example3.png\" srcset=\"/static/fa41fd6b886f95694d29e5df3d250cbd/222b7/local-storage-example3.png 163w,\n/static/fa41fd6b886f95694d29e5df3d250cbd/ff46a/local-storage-example3.png 325w,\n/static/fa41fd6b886f95694d29e5df3d250cbd/a6d36/local-storage-example3.png 650w,\n/static/fa41fd6b886f95694d29e5df3d250cbd/5a190/local-storage-example3.png 800w\" sizes=\"(max-width: 650px) 100vw, 650px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<br/>\n<p>parser-storages 라이브러리를 사용하여 값을 저장하고 값을 가져온 결과입니다.</p>\n<p>이처럼 어떤 타입으로 값을 저장하였는지를 판단하여 값을 가져올 때 자동으로 타입을 변환하여 리턴해줍니다.</p>\n<h3>Next.js에서의 localStorage 문제점</h3>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"js\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">localStorage.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">setItem</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;foo&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;bar&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span></code></pre>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 482px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 39.877300613496935%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABJ0AAASdAHeZh94AAAByElEQVR42mWS25KaQBRF/Z6kkhFQvMQZ75ajES8IgiAiKjgyOjETH6Yq/75yoJKnPJza3ftUr+7d3YVBv8/UMBiNRrRaLUbPz7TaXYxlkGvW/+dblkW/16Pb7TKZTHLfFm8wGNATz3EcCs12h8dmk2q9hlYqoVcqlGsNOsMp5WqDeqPBg6JQVFVU6RcVNR8rmiZ+MVclm6sapbJOoS+gvixq6DrNWpVv5TI1VeGpqvNY1njSS1RlYV28ulqUXpFK8SHXWu4p6F+/oH7+lFfBr1WIuh3S+Yw3c8G7s+KHZXKZTznNLaK5SyJ6tn1enQ2paDgcc1rYUivevB37mYXd7uH2RhQGmspYdvHabV6mBnfP4WZbArZJlzaxteFg79iZAlp47KyI7cIncmMO/pm9l3LwRNcvHP2UwlCARknD73RIvo/55a64LObcRV9nM1LT5sVac3V9zpZLaCw5rhMiJyayQo5uIpvsOGTA9el/YBb5fWXz4a85yevHWTQzqxXhzCVaHQjNgL17yiF750gS3oj97KR/gRMBBvIdzjODj2DDfe3wO9zk0X/aS25Lk6vtkDpbgsmSSK5gO/ckekAcXAUcS9wLyfbKH5vTMsv1mKg/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"next console\" title=\"\" src=\"/static/52c8a25b4a835a1bf1e4cd46501e12b9/37e0d/next_console.png\" srcset=\"/static/52c8a25b4a835a1bf1e4cd46501e12b9/222b7/next_console.png 163w,\n/static/52c8a25b4a835a1bf1e4cd46501e12b9/ff46a/next_console.png 325w,\n/static/52c8a25b4a835a1bf1e4cd46501e12b9/37e0d/next_console.png 482w\" sizes=\"(max-width: 482px) 100vw, 482px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<br/>\n<p>Next.js 환경에서 localStorage 객체에 접근할시에 위와 같은 에러가 발생되게 됩니다.</p>\n<p>위 에러가 발생하는 이유는 Next.js가 서버 사이드에서 미리 렌더링 되기 때문입니다.</p>\n<p>localStorage는 브라우저 환경에서만 실행이 가능하기 때문에 서버 사이드에서 저 코드를 실행하면 정의되지 않다고 에러를 발생시키게 됩니다.</p>\n<pre class=\"grvsc-container github-light-theme grvsc-ps-t4tStz\" data-language=\"js\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-5 grvsc-t4tStz-9\">if</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> (</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">typeof</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> window </span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-9\">!==</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\"> </span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;undefined&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">  localStorage.</span><span class=\"grvsc-tiszgT-7 grvsc-t4tStz-5\">setItem</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">(</span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;foo&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">, </span><span class=\"grvsc-tiszgT-8 grvsc-t4tStz-10\">&quot;bar&quot;</span><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"grvsc-tiszgT-1 grvsc-t4tStz-1\">}</span></span></span></code></pre>\n<p>그래서 위와 같이 window 객체가 존재할 때, 즉 브라우저 환경에서만 실행하는 조건문을 걸어줘야 정상적으로 동작이 되는 것을 볼 수 있습니다.</p>\n<p>localStorage를 사용하려면 조건문을 걸어줘야하니 개발자 입장에서는 매우 귀찮고 번거롭습니다. parser-storages 라이브러리에서는 이 문제를 해결하여 개발자가 조건문을 걸지 않아도 실행이 되게끔 개선하였습니다.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .github-light-theme {\n    background-color: #ffffff;\n    color: #000000;\n  }\n  .github-light-theme .grvsc-tiszgT-1 { color: #000000; }\n  .github-light-theme .grvsc-tiszgT-7 { color: #005CC5; }\n  .github-light-theme .grvsc-tiszgT-8 { color: #032F62; }\n  .github-light-theme .grvsc-tiszgT-5 { color: #D73A49; }\n  .github-light-theme .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n  body[data-theme=dark] .grvsc-ps-t4tStz { color: #ffffff; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-1 { color: #FFFFFF; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-5 { color: #BB97E7; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-10 { color: #9DCDF5; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-t4tStz-9 { color: #EB7E81; }\n  body[data-theme=dark] .grvsc-ps-t4tStz .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","frontmatter":{"title":"parser-storages","desc":"웹 브라우저 저장소 localStorage의 문제점을 보완","thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVklEQVR42q2SzUsCURTF/WfbRBA2oo4zRaOjjuObUQyhwCw3EeSiRS6yRShUELiLhJYRYRFlYWNT4ztdx5SKMWfR4vA+uO93D+e+AHSR/6cCyMbgKRYDn+wlV3xa7Td5AKXRqolA5gumhYE0iYkElTBg8lT4T+DwsblMexnWxip6pTigx9DfKsAq5/HIVDh6FEgFqSbqzyEfAtkKOttRXK4PnUXQre3h/qyBJ1VCJ2/gaqeKblZxoXymQ0OCnVPRKZbxkaFzSoCVWEIvSXAzgkalDnb4jvPMGrkPYTCOyAs47vaaS6K9WcOboeC5WkG/oMKOB1FsNbFw0UYicYSTdAo2E9zM+d9DGclJC7BpELenTVi7JUBZhHl8gPn6Ph7Cc7gxQ7g2QuTSJ5CPO2sReiS6dy80oDvKFO6UJb/f5pcMeZTtJGN5Eo/X1wlwXXT8akByZtR8AiK/lopDN01AAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/f953ca85a4b40a04b44fd14c77b0451c/c5e13/thum.png","srcSet":"/static/f953ca85a4b40a04b44fd14c77b0451c/c5e13/thum.png 768w","sizes":"768px"},"sources":[{"srcSet":"/static/f953ca85a4b40a04b44fd14c77b0451c/c5a3a/thum.webp 768w","type":"image/webp","sizes":"768px"}]},"width":768,"height":431}}},"date":"2024-03-06","category":"lib"}}},"pageContext":{"slug":"/blog/parser-storages/"}},"staticQueryHashes":["1044384444","1840460387","3113679160"],"slicesMap":{}}